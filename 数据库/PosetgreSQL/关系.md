# 关系

在关系数据库中，**关系就是二维表**，由 **行** 和 **列** 组成

> [!tip]
> 
> **行(Row)**，也称为记录(Record)，元组。它描述了一个完整的数据 **实体**
> 
> 
> **列(Column)**，也称为字段(Field)，属性。 字段的取值范围叫做 **域(Domain)**。例如 `gender` 字段的取值就是 `1` 或者 `2` 两个值
> 
> 

比如，一张 User 表中，需要记录 **用户ID**、**用户名**、**注册时间**、**上次登录时间** 等信息，这些成为 **字段**(或者称为 **列**)。一条 **记录**，包含了所有列。

> [!tip]
> 一张表中的 **字段个数** 称为 **关系的维数**
> 
> 表中 **记录的条数** 成为 **关系的基数**

注意在关系中，**属性的顺序并不重要**。理论上，**元组顺序也不重要**，但是由于元组顺序与存储相关，会影响查询效率。

## 候选键

关系中，**能唯一标识一条元组的属性或属性集合**，称为 **候选键**

> [!tip]
> 也就是说，**候选键** 是表中 _一列_ 或者 _多列的组合_；通过这一个或者多个列能 **_唯一的标识一条记录_**。 **表中可能有多个候选键**

### 主键

> [!important] 
> 主键字段 **不能包含空值(null)**。主键字段往往使用 **整数**，并且让其 **自增长**
> 
> 也就是说，主键字段必须是 **非空且唯一的**

表中可以没有主键，但是，一般表设计中，往往都会有主键，以避免记录重复。

### 外键

严格来说，**当一个关系中的某个属性或属性集合与另一个关系（也可以是自身）的候选键匹配时**，就称作这个属性或属性集合是 **外键**

### 索引

为了快速检索用的。利用空间的消耗换取少了的时间消耗，显著提高查询效率。 可以对一列或者多列字段设定索引。

> [!tip] 常见的索引
> 
> **主键索引**，主键会自动建立主键索引，主键本身就是为了快速定位唯一记录的
>  
>  **唯一索引**，表中的 **索引列** 的值必须唯一
>  
>  **联合索引**，多个字段组合创建索引，使用条件查询时，先匹配左边字段
>  

## 完整性约束

为了保证数据的完整正确，数据模型还必须支持 **完整性约束**

数据完整性主要分为三类：**实体完整性**、**域完整性**、**参照完整性**。

> [!tip]
> 
> **实体完整性**: 是指 **保证表中所有的行唯一**，也就是说，实体完整性是 **_指关系中的主属性值不能为 Null 且不能有相同值_**
> 
> **域完整性**：表中的 **_列_ 必须满足某种特定的 _数据类型_ 或 _约束_**。其中约束又包括 _取值范围_、_精度_ 等规定
>
 > **参照完整性**：对关系数据库中 **建立关联关系的数据表间数据参照引用的约束**，也就是对 **外键的约束**
> 

> [!todo] 
> 在后续 [[约束]] 中介绍如何实现这些完整性约束

